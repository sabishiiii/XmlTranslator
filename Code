import org.json.JSONObject;
import org.json.XML;

public class JsonToXmlConverter {
    public static String convertJsonToXml(JSONObject json) {
        int PRETTY_PRINT_INDENT_FACTOR = 4;
        String xml = XML.toString(json, "root");
        return formatXml(xml, PRETTY_PRINT_INDENT_FACTOR);
    }

    private static String formatXml(String xml, int indentFactor) {
        try {
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            transformerFactory.setAttribute("indent-number", indentFactor);

            Transformer transformer = transformerFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");

            StreamResult result = new StreamResult(new StringWriter());
            DOMSource source = new DOMSource(parseXml(xml));

            transformer.transform(source, result);

            return result.getWriter().toString();
        } catch (TransformerException | IOException | SAXException | ParserConfigurationException e) {
            e.printStackTrace();
        }
        return null;
    }

    private static Document parseXml(String xml) throws IOException, SAXException, ParserConfigurationException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        return builder.parse(new InputSource(new StringReader(xml)));
    }
}

